(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,n){e.exports=n(75)},45:function(e,t,n){},50:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},67:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(32),s=n.n(i),c=(n(45),n(14)),o=n(15),l=n(19),u=n(16),d=n(18),h=n(26),m=n(7),p=n(4),f=(n(50),n(5)),v=n.n(f),E=n(9),g=n(21),S=n(1),w=(n(53),n(17)),x=(n(54),function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var r=e[e.length-1].trim();return e.reduce(function(e,t,a){try{var i=t.split(":",1)[0].trim();if(n[a])return"".concat(e," ").concat(r,"-").concat(i)}catch(s){console.warn(s)}return e},r)}),b={"Content-Type":"application/json"},O="#959595";function y(){var e=Object(w.a)(["link: "," Logo"]);return y=function(){return e},e}var k=r.a.memo(function(e){var t=e.size,n=void 0===t?"regular":t,a=e.handleClick,i=null;switch(n){case"small":i=r.a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("circle",{cx:"16",cy:"16",r:"16",fill:"white"}),r.a.createElement("rect",{x:"9.68188",y:"15.7145",width:"12",height:"4",transform:"rotate(-15.8474 9.68188 15.7145)",fill:"#313131"}),r.a.createElement("rect",{x:"20.6145",y:"8.45306",width:"4",height:"12",rx:"1",transform:"rotate(-15.8473 20.6145 8.45306)",fill:"#313131"}),r.a.createElement("rect",{x:"4.26062",y:"13.0953",width:"4",height:"12",rx:"1",transform:"rotate(-15.8474 4.26062 13.0953)",fill:"#313131"}),r.a.createElement("rect",{x:"2.53833",y:"16.183",width:"2",height:"6.5",rx:"1",transform:"rotate(-15.8474 2.53833 16.183)",fill:"#313131"}),r.a.createElement("rect",{x:"25.6262",y:"9.62921",width:"2",height:"6.5",rx:"1",transform:"rotate(-15.8474 25.6262 9.62921)",fill:"#313131"}));break;default:i=r.a.createElement("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("circle",{cx:"32",cy:"32",r:"32",fill:"white"}),r.a.createElement("rect",{x:"19.3638",y:"31.4289",width:"24",height:"8",transform:"rotate(-15.8474 19.3638 31.4289)",fill:"#313131"}),r.a.createElement("rect",{x:"41.229",y:"16.9061",width:"8",height:"24",rx:"1",transform:"rotate(-15.8474 41.229 16.9061)",fill:"#313131"}),r.a.createElement("rect",{x:"8.52125",y:"26.1907",width:"8",height:"24",rx:"1",transform:"rotate(-15.8474 8.52125 26.1907)",fill:"#313131"}),r.a.createElement("rect",{x:"5.07666",y:"32.366",width:"4",height:"13",rx:"1",transform:"rotate(-15.8474 5.07666 32.366)",fill:"#313131"}),r.a.createElement("rect",{x:"51.2523",y:"19.2584",width:"4",height:"13",rx:"1",transform:"rotate(-15.8474 51.2523 19.2584)",fill:"#313131"}))}return r.a.createElement("div",{className:x(y(),void 0!==a),onClick:function(e){e.stopPropagation(),a&&a(e)}},i)});n(55);function j(){var e=Object(w.a)(["\n      dim: ","\n      small: ","\n      Typography"]);return j=function(){return e},e}var T=r.a.memo(function(e){var t=e.dim,n=void 0!==t&&t,a=e.small,i=void 0!==a&&a,s=e.children;return r.a.createElement("div",{className:x(j(),n,i)},s)});n(56);function N(){var e=Object(w.a)(["\n        dashed: ","\n        margin: ","\n        IconButton\n      "]);return N=function(){return e},e}var C=r.a.memo(function(e){var t=e.icon,n=e.outline,a=void 0===n?"none":n,i=e.margin,s=void 0===i||i,c=e.stopPropagation,o=void 0!==c&&c,l=e.handleClick,u=null;switch(t){case"add":u=r.a.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{x:"23.25",y:"12",width:"1.5",height:"24",fill:"#959595"}),r.a.createElement("rect",{x:"12",y:"23.25",width:"24",height:"1.5",fill:"#959595"}));break;case"done":u=r.a.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{x:"38.1003",y:"16.3129",width:"25.4962",height:"1.5",transform:"rotate(132.626 38.1003 16.3129)",fill:"#959595"}),r.a.createElement("rect",{x:"11.5159",y:"24.7777",width:"13.5929",height:"1.5",transform:"rotate(42.6257 11.5159 24.7777)",fill:"#959595"}));break;case"minus":u=r.a.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{x:"12",y:"23.25",width:"24",height:"1.5",fill:"#959595"}));break;case"next":u=r.a.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{x:"28.0607",y:"11.25",width:"18",height:"1.5",transform:"rotate(45 28.0607 11.25)",fill:"#959595"}),r.a.createElement("rect",{x:"27",y:"35.9779",width:"18",height:"1.5",transform:"rotate(-45 27 35.9779)",fill:"#959595"}),r.a.createElement("rect",{x:"7.5",y:"23.25",width:"31.5",height:"1.5",fill:"#959595"}));break;case"start":u=r.a.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{x:"20.5607",y:"11.25",width:"18",height:"1.5",transform:"rotate(45 20.5607 11.25)",fill:"#959595"}),r.a.createElement("rect",{x:"19.5",y:"35.9779",width:"18",height:"1.5",transform:"rotate(-45 19.5 35.9779)",fill:"#959595"}));break;case"cancel":u=r.a.createElement("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.a.createElement("rect",{x:"31.955",y:"14.9844",width:"1.5",height:"24",transform:"rotate(45 31.955 14.9844)",fill:"#959595"}),r.a.createElement("rect",{x:"16.045",y:"14.9844",width:"24",height:"1.5",transform:"rotate(45 16.045 14.9844)",fill:"#959595"}))}return r.a.createElement("div",{className:x(N(),"dashed"===a,s),onClick:function(e){("none"!==a||o)&&e.stopPropagation(),l&&l(e)}},u)});n(57);function I(){var e=Object(w.a)(["\n          selected: ","\n          highlighted: ","\n          clickable: ","\n          OptionsList-item\n        "]);return I=function(){return e},e}var R,D=r.a.memo(function(e){var t=e.options,n=e.handleClick,a=function(e){return function(t){t.stopPropagation(),n&&n(e)}};return r.a.createElement("div",{className:"OptionsList"},t.map(function(e){return r.a.createElement("div",{key:e.value,className:x(I(),e.selected,e.highlighted||!1,void 0!==n),onClick:a(e)},r.a.createElement(T,{dim:!e.selected&&!e.highlighted},e.value))}))}),_=(n(58),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).refreshIntervalId=void 0,n.clearTimeoutIds=[],n.state={},n.update=n.update.bind(Object(S.a)(Object(S.a)(n))),n.start=n.start.bind(Object(S.a)(Object(S.a)(n))),n.stop=n.stop.bind(Object(S.a)(Object(S.a)(n))),n.getMinutes=n.getMinutes.bind(Object(S.a)(Object(S.a)(n))),n.getSeconds=n.getSeconds.bind(Object(S.a)(Object(S.a)(n))),n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.startOnMount&&this.start()}},{key:"componentWillUnmount",value:function(){this.refreshIntervalId&&clearInterval(this.refreshIntervalId),this.clearTimeoutIds.length&&this.clearTimeoutIds.forEach(clearTimeout)}},{key:"update",value:function(){this.setState(function(e){return{elapsed:e.startTime?Date.now()-e.startTime:e.elapsed}})}},{key:"start",value:function(){this.refreshIntervalId=setInterval(this.update,500),this.setState({startTime:Date.now(),elapsed:0})}},{key:"stop",value:function(){var e=this;clearInterval(this.refreshIntervalId),this.setState({endTime:Date.now()}),this.props.clearOnStop&&this.clearTimeoutIds.push(setTimeout(function(){return e.setState({elapsed:0})},this.props.clearTimout||3e3))}},{key:"getMinutes",value:function(){return(this.state.elapsed?Math.round(this.state.elapsed/6e4):0).toString().padStart(2,"0")}},{key:"getSeconds",value:function(){return(this.state.elapsed?Math.round(this.state.elapsed%6e4/1e3):0).toString().padStart(2,"0")}},{key:"render",value:function(){return r.a.createElement("div",{className:"StopWatch"},r.a.createElement(T,null,this.getMinutes()),r.a.createElement(T,null,":"),r.a.createElement(T,null,this.getSeconds()))}}]),t}(a.Component)),W=(n(59),function(e){var t=e.icon,n=e.handleClick;return r.a.createElement(C,{icon:t,handleClick:n,margin:!1,outline:"dashed"})}),L=r.a.memo(function(e){var t=e.start,n=e.end,a=e.children;return r.a.createElement("div",{className:"HorizontalControl"},r.a.createElement(W,t),r.a.createElement("div",{className:"HorizontalControl-display"},a),r.a.createElement(W,n))}),M=(n(60),function(e){var t=e.children,n=e.limit,a=void 0===n?100:n,i=e.renderPrefix,s=t;return t.length>a&&(s=t.slice(t.length-a)),r.a.createElement("div",{className:"TextList"},s&&s.map(function(e,n){return r.a.createElement("div",{key:n,className:"TextList-item"},i&&r.a.createElement("div",{className:"TextList-prefix"},r.a.createElement(T,{dim:!0,small:!0},i(t.length>a?t.length-a+n:n))),r.a.createElement("div",{className:"TextList-text"},r.a.createElement(T,{dim:!0,small:!0},e)))}))}),P=(n(61),r.a.memo(function(e){var t=e.value,n=e.onChange,a=e.autoFocus;return r.a.createElement("div",{className:"TextInput"},r.a.createElement("input",{className:"TextInput-input",type:"text",value:t,onChange:function(e){return n(e.target.value,e)},autoFocus:a}))}));!function(e){e.START_SESSION="START_SESSION",e.END_SESSION="END_SESSION",e.START_SET="START_SET",e.END_SET="END_SET",e.SET_SESSIONS="SET_SESSIONS"}(R||(R={}));var A,G=function(e){return{type:R.SET_SESSIONS,payload:{sessions:e}}};!function(e){e.ADD_EXERCISES="ADD_EXERCISES",e.SET_EXERCISES="SET_EXERCISES"}(A||(A={}));var B,F=function(e){return{type:A.ADD_EXERCISES,payload:{exercises:e}}},U=function(e){return{type:A.SET_EXERCISES,payload:{exercises:e}}},H=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).setsStopWatchRef=r.a.createRef(),n.state={reps:8,weight:30,sessionMuscleGroupOptions:[{selected:!1,value:"Shoulders"},{selected:!1,value:"Legs"},{selected:!1,value:"Back"},{selected:!1,value:"Chest"},{selected:!1,value:"Biceps"},{selected:!1,value:"Triceps"},{selected:!1,value:"Abs"}],newExerciseMuscleGroupOptions:[{selected:!1,highlighted:!1,value:"Shoulders"},{selected:!1,highlighted:!1,value:"Legs"},{selected:!1,highlighted:!1,value:"Back"},{selected:!1,highlighted:!1,value:"Chest"},{selected:!1,highlighted:!1,value:"Biceps"},{selected:!1,highlighted:!1,value:"Triceps"},{selected:!1,highlighted:!1,value:"Abs"}],inSet:!1,weightUnit:5,repsUnit:1,setSummaries:[],newExercise:""},n.handleBackgroundClick=n.handleBackgroundClick.bind(Object(S.a)(Object(S.a)(n))),n.handleOptionsListItemClick=n.handleOptionsListItemClick.bind(Object(S.a)(Object(S.a)(n))),n.increaseReps=n.increaseReps.bind(Object(S.a)(Object(S.a)(n))),n.decreaseReps=n.decreaseReps.bind(Object(S.a)(Object(S.a)(n))),n.increaseWeight=n.increaseWeight.bind(Object(S.a)(Object(S.a)(n))),n.decreaseWeight=n.decreaseWeight.bind(Object(S.a)(Object(S.a)(n))),n.nextExercise=n.nextExercise.bind(Object(S.a)(Object(S.a)(n))),n.completeSession=n.completeSession.bind(Object(S.a)(Object(S.a)(n))),n.newExercise=n.newExercise.bind(Object(S.a)(Object(S.a)(n))),n.updateNewExercise=n.updateNewExercise.bind(Object(S.a)(Object(S.a)(n))),n.cancelNewExercise=n.cancelNewExercise.bind(Object(S.a)(Object(S.a)(n))),n.addNewExercise=n.addNewExercise.bind(Object(S.a)(Object(S.a)(n))),n}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.refreshExercises(),this.props.refreshSessions()}},{key:"handleBackgroundClick",value:function(){var e=this;switch(this.props.location.pathname){case"/":return this.props.navigateTo("/musclegroups");case"/musclegroups":var t=this.state.sessionMuscleGroupOptions.filter(function(e){return e.selected}).map(function(e){return e.value});if(!t.length)return;return this.props.startSession(t),this.props.navigateTo("/exercise");case"/exercise":return this.props.exerciseOptions[0]&&this.handleOptionsListItemClick(this.props.exerciseOptions[0]);case"/sets":if(this.setsStopWatchRef){var n=this.setsStopWatchRef.current;n&&(this.state.inSet?(n.stop(),this.props.endSet(this.state.reps,this.state.weight),this.setState(function(t){return{inSet:!1,setSummaries:[].concat(Object(g.a)(t.setSummaries),["".concat(e.state.reps," reps at ").concat(e.state.weight,"lbs")])}})):(n.start(),this.state.exercise&&this.props.startSet(this.state.exercise._id),this.setState({inSet:!0})))}}}},{key:"handleOptionsListItemClick",value:function(e){switch(this.props.location.pathname){case"/musclegroups":return this.setState(function(t){return{sessionMuscleGroupOptions:t.sessionMuscleGroupOptions.map(function(t){return{value:t.value,selected:t.value===e.value?!t.selected:t.selected}})}});case"/exercise":return e.extra&&this.setState({exercise:e.extra}),this.props.navigateTo("/sets");case"/exercise/add":return this.setState(function(t){return{newExerciseMuscleGroupOptions:t.newExerciseMuscleGroupOptions.map(function(t){return{value:t.value,selected:t.value===e.value?!t.selected&&!t.highlighted:t.selected,highlighted:t.value===e.value?t.selected&&!t.highlighted:t.highlighted}})}})}}},{key:"increaseReps",value:function(){var e=this;this.setState(function(t){return{reps:t.reps+e.state.repsUnit}})}},{key:"decreaseReps",value:function(){var e=this;this.setState(function(t){return{reps:t.reps-e.state.repsUnit}})}},{key:"increaseWeight",value:function(){var e=this;this.setState(function(t){return{weight:t.weight+e.state.weightUnit}})}},{key:"decreaseWeight",value:function(){var e=this;this.setState(function(t){return{weight:t.weight-e.state.weightUnit}})}},{key:"renderSetPrefix",value:function(e){return"Set ".concat(e+1,": ")}},{key:"nextExercise",value:function(){var e=this;this.state.inSet||this.setState({setSummaries:[],inSet:!1,exercise:void 0},function(){return e.props.navigateTo("/exercise")})}},{key:"completeSession",value:function(){this.props.endSession(),this.props.navigateTo("/")}},{key:"newExercise",value:function(){this.props.navigateTo("/exercise/add")}},{key:"updateNewExercise",value:function(e){this.setState({newExercise:e})}},{key:"addNewExercise",value:function(){var e=Object(E.a)(v.a.mark(function e(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.state.newExercise){e.next=4;break}return e.next=3,this.props.addExercise({name:this.state.newExercise,primaryMuscleGroups:this.state.newExerciseMuscleGroupOptions.filter(function(e){return e.selected}).map(function(e){return e.value}),secondaryMuscleGroups:this.state.newExerciseMuscleGroupOptions.filter(function(e){return e.highlighted}).map(function(e){return e.value})});case 3:this.props.navigateTo("/exercise");case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"cancelNewExercise",value:function(){this.props.navigateTo("/exercise")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"SessionRecorder",onClick:this.handleBackgroundClick},r.a.createElement("div",{className:"SessionRecorder-content"},r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/exercise/add",render:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"SessionRecorder-heading"},r.a.createElement(T,{dim:!0},"New Exercise")),r.a.createElement(P,{value:e.state.newExercise,onChange:e.updateNewExercise,autoFocus:!0}),r.a.createElement("div",{className:"SessionRecorder-heading"},r.a.createElement(T,{dim:!0},"Muscle Groups"),r.a.createElement(T,{dim:!0,small:!0},"(double-click for secondary)")),r.a.createElement(D,{options:e.state.newExerciseMuscleGroupOptions,handleClick:e.handleOptionsListItemClick}),r.a.createElement("div",{className:"SessionRecorder-button-list"},e.state.newExercise&&r.a.createElement(C,{icon:"done",outline:"dashed",handleClick:e.addNewExercise}),r.a.createElement(C,{icon:"cancel",outline:"dashed",handleClick:e.cancelNewExercise})))}}),r.a.createElement(h.a,{path:"/sets",render:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"SessionRecorder-heading"},r.a.createElement(T,{dim:!0},e.state.exercise?e.state.exercise.name:"Go pick an exercise!")),e.state.inSet?r.a.createElement(C,{icon:"done"}):r.a.createElement(C,{icon:"start"}),r.a.createElement("div",{className:"SessionRecorder-sets-stopwatch"},r.a.createElement(_,{ref:e.setsStopWatchRef,clearOnStop:!0})),r.a.createElement("div",{className:"SessionRecorder-number-input"},r.a.createElement(T,{dim:!0,small:!0},"reps"),r.a.createElement("div",{className:"SessionRecorder-number-input-control"},r.a.createElement(L,{start:{icon:"minus",handleClick:e.decreaseReps},end:{icon:"add",handleClick:e.increaseReps}},e.state.reps))),r.a.createElement("div",{className:"SessionRecorder-number-input"},r.a.createElement(T,{dim:!0,small:!0},"weight"),r.a.createElement("div",{className:"SessionRecorder-number-input-control"},r.a.createElement(L,{start:{icon:"minus",handleClick:e.decreaseWeight},end:{icon:"add",handleClick:e.increaseWeight}},e.state.weight))),r.a.createElement("div",{className:"SessionRecorder-sets-list"},r.a.createElement(M,{renderPrefix:e.renderSetPrefix,limit:5},e.state.setSummaries)),!e.state.inSet&&r.a.createElement(C,{icon:"done",outline:"dashed",handleClick:e.nextExercise}))}}),r.a.createElement(h.a,{path:"/exercise",render:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"SessionRecorder-heading"},r.a.createElement(T,{dim:!0},"Exercise")),r.a.createElement(D,{options:e.props.exerciseOptions,handleClick:e.handleOptionsListItemClick}),r.a.createElement("div",{className:"SessionRecorder-button-list"},r.a.createElement(C,{icon:"done",outline:"dashed",handleClick:e.completeSession}),r.a.createElement(C,{icon:"add",outline:"dashed",handleClick:e.newExercise}),r.a.createElement(C,{icon:"next"})))}}),r.a.createElement(h.a,{path:"/musclegroups",render:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"SessionRecorder-heading"},r.a.createElement(T,{dim:!0},"Muscle Groups")),r.a.createElement(D,{options:e.state.sessionMuscleGroupOptions,handleClick:e.handleOptionsListItemClick}),r.a.createElement(C,{icon:"next"}))}}),r.a.createElement(h.a,{path:"/",render:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"SessionRecorder-logo"},r.a.createElement(k,null)),r.a.createElement(T,{dim:!0},"Start Gym Session"),r.a.createElement(C,{icon:"add"}))}}))))}}]),t}(a.Component),X=Object(m.c)(function(e){return{location:e.router.location,exerciseOptions:e.exercises.filter(function(t){return e.sessions.currentSession&&function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1;return t.forEach(function(t){if(e.primaryMuscleGroups.includes(t))return n=!0}),n}(t,e.sessions.currentSession.muscleGroups)}).map(function(e){return{selected:!1,value:e.name,extra:e}})}},function(e){return{navigateTo:function(t){return e(Object(p.d)(t))},startSession:function(t){return e(function(e){return{type:R.START_SESSION,payload:{muscleGroups:e}}}(t))},endSession:function(){return e(function(){var e=Object(E.a)(v.a.mark(function e(t,n){var a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:R.END_SESSION}),!(a=n().sessions.sessions).length){e.next=8;break}return e.next=5,fetch("/api/sessions",{method:"POST",headers:b,body:JSON.stringify({session:a[a.length-1]})});case 5:if(e.sent.ok){e.next=8;break}return e.abrupt("return",console.log("Huh, I couldn't save your session. Weird."));case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}())},startSet:function(t){return e(function(e){return{type:R.START_SET,payload:{exercise:e}}}(t))},endSet:function(t,n){return e(function(e,t){return{type:R.END_SET,payload:{reps:e,weight:t}}}(t,n))},refreshExercises:function(){return e(function(){var e=Object(E.a)(v.a.mark(function e(t){var n,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/exercises");case 2:if((n=e.sent).ok){e.next=5;break}return e.abrupt("return",console.log("Huh, I couldn't exercises from the backend. Weird."));case 5:return e.next=7,n.json();case 7:a=e.sent,t(U(a));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},refreshSessions:function(){return e(function(){var e=Object(E.a)(v.a.mark(function e(t){var n,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/sessions");case 2:if((n=e.sent).ok){e.next=5;break}return e.abrupt("return",console.log("Huh, I couldn't get your session. Weird."));case 5:return e.next=7,n.json();case 7:a=e.sent,t(G(a));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())},addExercise:function(t){return e(function(e){return function(){var t=Object(E.a)(v.a.mark(function t(n){var a,r;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/exercises",{method:"PUT",headers:b,body:JSON.stringify(e)});case 2:if((a=t.sent).ok){t.next=5;break}return t.abrupt("return",console.log("Huh, I couldn't save the exercise in the backend. Weird."));case 5:return t.next=7,a.json();case 7:r=t.sent,n(F([r]));case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}()}(t))}}})(H),z=n(27),J=n(6),Y=n(37),q=(n(67),n(35)),$=n.n(q),K=(n(71),n(72),n(73),r.a.memo(function(e){var t=e.children;return r.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},t)})),Q=r.a.memo(function(e){var t=e.children;return r.a.createElement(K,null,r.a.createElement("div",{className:"ContentCard"},r.a.createElement("div",{className:"ContentCard-display"},t[0]),r.a.createElement("div",{className:"ContentCard-caption"},t[1])))}),V=r.a.memo(function(e){var t=e.sessions,n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=[],r=new Date;r.setDate(r.getDate()+(t-1-r.getDay()+7)%7+1-7*(e-n));for(var i=0;i<e;++i){var s=new Date(r);r.setDate(r.getDate()+6);var c=new Date(r);r.setDate(r.getDate()+1);var o=new Date(r);a.push({start:s,end:o,label:"".concat(s.toDateString().slice(4,7)," ").concat(s.getDate(),"-").concat(c.getDate())})}return a}(),a={type:"bar",x:n.map(function(e){return e.label}),y:n.map(function(e){return t.filter(function(t){return t.timestamp>e.start&&t.timestamp<=e.end}).length}),marker:{opacity:.5,color:["blue","blue","blue","red","red"]},width:.5};return r.a.createElement("div",{className:"SessionsPerWeekCard"},r.a.createElement(Q,null,r.a.createElement($.a,{className:"SessionsPerWeekCard-plot",data:[a],layout:{margin:{t:24,r:36,b:44,l:36,pad:10},autosize:!0,xaxis:{tickangle:-15,tickfont:{size:8}},yaxis:{tickcolor:O,tickfont:{size:10}}},config:{displayModeBar:!1}}),r.a.createElement("div",null,"Sessions per week")))}),Z=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"getPanelIndex",value:function(){try{return this.props.location.search.slice(1).split("&").reduce(function(e,t){var n=t.split("="),a=Object(Y.a)(n,2),r=a[0],i=a[1];return Object(J.a)({},e,Object(z.a)({},r,i))},{}).panel}catch(e){return console.warn("You've got an invalid query string there bro."),""}}},{key:"getSpotlight",value:function(){switch(this.getPanelIndex()){case"1":default:return r.a.createElement(V,{sessions:this.props.sessions})}}},{key:"render",value:function(){return r.a.createElement("div",{className:"SessionTracker"},r.a.createElement("div",{className:"SessionTracker-spotlight"},this.getSpotlight()))}}]),t}(a.Component),ee=Object(m.c)(function(e){return{location:e.router.location,sessions:e.sessions.sessions}},function(e){return{navigateTo:function(t){return e(Object(p.d)(t))}}})(Z),te=(n(74),r.a.memo(function(e){var t=e.navigateTo;return r.a.createElement("div",{className:"Toolbar"},r.a.createElement(k,{size:"small",handleClick:function(){t("/")}}))}));!function(e){e.SET_PROFILE="SET_PROFILE",e.REFRESH_PROFILE="REFRESH_PROFILE"}(B||(B={}));var ne=function(e){return{type:B.SET_PROFILE,payload:{profile:e}}},ae=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.refreshProfile()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"theme-dark"},r.a.createElement("div",{className:"App"},r.a.createElement(h.c,null,r.a.createElement(h.a,{path:"/",exact:!0}),r.a.createElement(h.a,{path:"/",render:function(){return r.a.createElement(te,{navigateTo:e.props.navigateTo})}})),r.a.createElement(X,null),!this.props.isLoggedIn&&r.a.createElement(K,null,r.a.createElement("a",{href:"/api/auth/google"},r.a.createElement("div",{className:"App-login"},r.a.createElement(T,{dim:!0},"Login")))),r.a.createElement(ee,null)))}}]),t}(a.Component),re=Object(m.c)(function(e){return{isLoggedIn:null!==e.profile}},function(e){return{navigateTo:function(t){return e(Object(p.d)(t))},refreshProfile:function(){return e(function(){var e=Object(E.a)(v.a.mark(function e(t){var n,a;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/users");case 2:if((n=e.sent).ok){e.next=5;break}return e.abrupt("return",console.log("You aren't logged in. That's okay tho."));case 5:return e.next=7,n.json();case 7:a=e.sent,t(ne(a));case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}}})(ae),ie=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function se(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ce,oe=n(12),le=n(20),ue=n(31),de=n(36),he=n(13),me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{sessions:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.SET_SESSIONS:return Object(J.a)({},e,{sessions:t.payload.sessions.map(function(e){return Object(J.a)({},e,{timestamp:new Date(e.timestamp)})})});case R.START_SESSION:return Object(J.a)({},e,{currentSession:{timestamp:new Date,muscleGroups:t.payload.muscleGroups,sets:[]}});case R.END_SESSION:return e.currentSession?Object(J.a)({},e,{currentSession:void 0,sessions:[].concat(Object(g.a)(e.sessions),[Object(J.a)({},e.currentSession,{duration:Date.now()-e.currentSession.timestamp.valueOf()})])}):(console.warn("Tried to end session with no current session. This is a no-op."),e);case R.START_SET:return Object(J.a)({},e,{currentSet:{timestamp:new Date,exercise:t.payload.exercise}});case R.END_SET:return e.currentSession?e.currentSet?Object(J.a)({},e,{currentSet:void 0,currentSession:Object(J.a)({},e.currentSession,{sets:[].concat(Object(g.a)(e.currentSession.sets),[Object(J.a)({},e.currentSet,{duration:Date.now()-e.currentSession.timestamp.valueOf(),reps:t.payload.reps,weight:t.payload.weight})])})}):(console.warn("Tried to end set with no current set. This is a no-op."),e):(console.warn("Tried to end set with no current session. This is a no-op."),e);default:return e}},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A.ADD_EXERCISES:return[].concat(Object(g.a)(e),Object(g.a)(t.payload.exercises));case A.SET_EXERCISES:return t.payload.exercises;default:return e}},fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B.SET_PROFILE:return Object(J.a)({},t.payload.profile);default:return e}},ve=Object(oe.a)(),Ee=Object(le.e)((ce=ve,Object(le.c)({router:Object(he.b)(ce),sessions:me,exercises:pe,profile:fe})),Object(le.d)(Object(le.a)(Object(ue.a)(ve),de.a)));s.a.render(r.a.createElement(m.a,{store:Ee},r.a.createElement(he.a,{history:ve},r.a.createElement(re,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/Jallum-Gym-Tracker-PWA",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("/Jallum-Gym-Tracker-PWA","/service-worker.js");ie?(function(e,t){fetch(e).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):se(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):se(t,e)})}}()}},[[40,1,2]]]);
//# sourceMappingURL=main.543b4f64.chunk.js.map